"use strict";(self.webpackChunkuiv_2=self.webpackChunkuiv_2||[]).push([[5779],{630:e=>{e.exports=JSON.parse('{"permalink":"/blog/universal-image-mcp-multi-provider-image-generation","source":"@site/blog/2026-01-31-universal-image-mcp.mdx","title":"Universal Image MCP - One Server, Three AI Image Providers","description":"Build AI applications with unified access to AWS Bedrock Nova Canvas, OpenAI GPT Image, and Google Gemini through a single Model Context Protocol server.","date":"2026-01-31T00:00:00.000Z","tags":[{"inline":true,"label":"mcp","permalink":"/blog/tags/mcp"},{"inline":true,"label":"ai","permalink":"/blog/tags/ai"},{"inline":true,"label":"image generation","permalink":"/blog/tags/image-generation"},{"inline":true,"label":"aws bedrock","permalink":"/blog/tags/aws-bedrock"},{"inline":true,"label":"openai","permalink":"/blog/tags/openai"},{"inline":true,"label":"google gemini","permalink":"/blog/tags/google-gemini"},{"inline":true,"label":"python","permalink":"/blog/tags/python"}],"readingTime":4.93,"hasTruncateMarker":true,"authors":[{"name":"Manu Mishra","title":"Solutions Architect & Applied Software Engineer","url":"https://github.com/manu-mishra","imageURL":"/img/logo.png","key":"manu","page":null}],"frontMatter":{"slug":"universal-image-mcp-multi-provider-image-generation","title":"Universal Image MCP - One Server, Three AI Image Providers","description":"Build AI applications with unified access to AWS Bedrock Nova Canvas, OpenAI GPT Image, and Google Gemini through a single Model Context Protocol server.","keywords":["mcp server","image generation","aws bedrock","openai","google gemini","claude desktop","model context protocol","ai images","nova canvas","imagen"],"image":"/img/blog/universal-image-mcp-architecture-clay-openai.png","authors":"manu","tags":["mcp","ai","image generation","aws bedrock","openai","google gemini","python"]},"unlisted":false,"nextItem":{"title":"Serverless Streaming Analytics with S3 Tables & Firehose","permalink":"/blog/s3-tables-streaming-analytics"}}')},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var r=i(6540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}},8925:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/universal-image-mcp-architecture-clay-openai-a3053011239d366af23cd6e8a0f54121.png"},9410:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var r=i(630),s=i(4848),t=i(8453);const a={slug:"universal-image-mcp-multi-provider-image-generation",title:"Universal Image MCP - One Server, Three AI Image Providers",description:"Build AI applications with unified access to AWS Bedrock Nova Canvas, OpenAI GPT Image, and Google Gemini through a single Model Context Protocol server.",keywords:["mcp server","image generation","aws bedrock","openai","google gemini","claude desktop","model context protocol","ai images","nova canvas","imagen"],image:"/img/blog/universal-image-mcp-architecture-clay-openai.png",authors:"manu",tags:["mcp","ai","image generation","aws bedrock","openai","google gemini","python"]},o=void 0,l={authorsImageUrls:[void 0]},d=[{value:"The Problem with Multi-Provider Image Generation",id:"the-problem-with-multi-provider-image-generation",level:2},{value:"MCP as the Abstraction Layer",id:"mcp-as-the-abstraction-layer",level:2},{value:"Architecture Decisions",id:"architecture-decisions",level:2},{value:"Lazy Initialization",id:"lazy-initialization",level:3},{value:"Dynamic Model Discovery",id:"dynamic-model-discovery",level:3},{value:"Provider Abstraction",id:"provider-abstraction",level:3},{value:"Installation and Configuration",id:"installation-and-configuration",level:2},{value:"Production Considerations",id:"production-considerations",level:2},{value:"Credential Management",id:"credential-management",level:3},{value:"Cost Control",id:"cost-control",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"When to Use This Pattern",id:"when-to-use-this-pattern",level:2},{value:"What&#39;s Next",id:"whats-next",level:2},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Universal Image MCP Architecture",src:i(8925).A+"",width:"1536",height:"1024"})}),"\n",(0,s.jsx)(n.p,{children:"I use AI-generated images constantly\u2014architecture diagrams, UI mockups, interface concepts, responsive design visualizations. Different models excel at different tasks, and I often compare outputs across providers to pick the best result."}),"\n",(0,s.jsx)(n.p,{children:"The existing MCP servers I found had a common limitation: hardcoded model IDs. When providers deprecated models, tools broke. When new models launched, they weren't available until someone updated the code."}),"\n",(0,s.jsxs)(n.p,{children:["So I built ",(0,s.jsx)(n.strong,{children:"Universal Image MCP"}),"\u2014a server that fetches models dynamically from provider APIs. New models appear automatically. Deprecated ones disappear. No code changes required."]}),"\n",(0,s.jsx)(n.h2,{id:"the-problem-with-multi-provider-image-generation",children:"The Problem with Multi-Provider Image Generation"}),"\n",(0,s.jsx)(n.p,{children:"Each provider requires separate integration work:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# AWS Bedrock\nimport boto3\nbedrock = boto3.client('bedrock-runtime', region_name='us-east-1')\nresponse = bedrock.invoke_model(...)\n\n# OpenAI\nfrom openai import OpenAI\nclient = OpenAI(api_key=\"...\")\nresponse = client.images.generate(...)\n\n# Google Gemini\nimport google.generativeai as genai\ngenai.configure(api_key=\"...\")\nresponse = model.generate_content(...)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Each has different authentication, request formats, response structures, and error handling. Building applications that switch between providers means maintaining three parallel code paths."}),"\n",(0,s.jsx)(n.h2,{id:"mcp-as-the-abstraction-layer",children:"MCP as the Abstraction Layer"}),"\n",(0,s.jsx)(n.p,{children:"The Model Context Protocol provides a standardized way for AI assistants to interact with external tools. Instead of building provider-specific integrations into your application, you build one MCP server that handles the complexity."}),"\n",(0,s.jsx)(n.p,{children:"Universal Image MCP exposes four tools:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"list_models()"})," - Discover available models across all enabled providers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"generate_image()"})," - Create images from text prompts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"transform_image()"})," - Edit existing images with AI"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prompt_guide()"})," - Get prompt engineering best practices"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Behind these tools, the server handles provider routing, credential management, and API translation."}),"\n",(0,s.jsx)(n.h2,{id:"architecture-decisions",children:"Architecture Decisions"}),"\n",(0,s.jsx)(n.h3,{id:"lazy-initialization",children:"Lazy Initialization"}),"\n",(0,s.jsx)(n.p,{children:"Provider clients initialize only when first used. If you enable all three providers but only use OpenAI, AWS and Google clients never instantiate:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ProviderManager:\n    def __init__(self):\n        self._aws_client = None\n        self._openai_client = None\n        self._gemini_client = None\n    \n    @property\n    def aws(self):\n        if self._aws_client is None and os.getenv('ENABLE_AWS') == 'true':\n            self._aws_client = AWSBedrockProvider()\n        return self._aws_client\n"})}),"\n",(0,s.jsx)(n.p,{children:"This reduces cold start time and avoids credential validation for unused providers."}),"\n",(0,s.jsx)(n.h3,{id:"dynamic-model-discovery",children:"Dynamic Model Discovery"}),"\n",(0,s.jsxs)(n.p,{children:["Models are fetched from provider APIs at runtime, not hardcoded. When you call ",(0,s.jsx)(n.code,{children:"list_models()"}),", the server queries each enabled provider's API for current model availability:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# AWS Bedrock\nmodels = bedrock.list_foundation_models(\n    byOutputModality='IMAGE',\n    byInferenceType='ON_DEMAND'\n)\n\n# OpenAI\nmodels = openai.models.list()\nfiltered = [m for m in models if 'image' in m.id.lower()]\n\n# Google Gemini\nmodels = genai.list_models()\nfiltered = [m for m in models if 'generateContent' in m.supported_generation_methods]\n"})}),"\n",(0,s.jsx)(n.p,{children:"This ensures you always see the latest models without updating the server code."}),"\n",(0,s.jsx)(n.h3,{id:"provider-abstraction",children:"Provider Abstraction"}),"\n",(0,s.jsx)(n.p,{children:"Each provider implements a common interface:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ImageProvider(ABC):\n    @abstractmethod\n    def list_models(self) -> List[str]:\n        pass\n    \n    @abstractmethod\n    def generate_image(self, prompt: str, model_id: str, **kwargs) -> bytes:\n        pass\n    \n    @abstractmethod\n    def transform_image(self, image_path: str, prompt: str, model_id: str, **kwargs) -> bytes:\n        pass\n"})}),"\n",(0,s.jsx)(n.p,{children:"The server routes requests based on model ID prefix:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def route_request(model_id: str):\n    if model_id.startswith('amazon.'):\n        return providers.aws\n    elif model_id.startswith('gpt-') or model_id.startswith('chatgpt-'):\n        return providers.openai\n    elif model_id.startswith('models/'):\n        return providers.gemini\n"})}),"\n",(0,s.jsx)(n.h2,{id:"installation-and-configuration",children:"Installation and Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Install via pip:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install universal-image-mcp\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Configure in Kiro IDE (",(0,s.jsx)(n.code,{children:"~/.kiro/settings/mcp.json"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "universal-image-mcp": {\n      "command": "uvx",\n      "args": ["universal-image-mcp@latest"],\n      "env": {\n        "ENABLE_AWS": "true",\n        "AWS_PROFILE": "default",\n        "AWS_REGION": "us-east-1",\n        \n        "ENABLE_OPENAI": "true",\n        "OPENAI_API_KEY": "sk-...",\n        \n        "ENABLE_GEMINI": "true",\n        "GEMINI_API_KEY": "..."\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Restart Kiro IDE. The server appears in the MCP tools menu."}),"\n",(0,s.jsx)(n.h2,{id:"production-considerations",children:"Production Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"credential-management",children:"Credential Management"}),"\n",(0,s.jsx)(n.p,{children:"The server reads credentials from environment variables. For production deployments:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"AWS"}),": Use IAM roles instead of access keys"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OpenAI"}),": Rotate API keys regularly, use separate keys per environment"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Google"}),": Use service accounts for programmatic access"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cost-control",children:"Cost Control"}),"\n",(0,s.jsx)(n.p,{children:"Each provider bills differently:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"AWS Bedrock"}),": Per-image pricing, volume discounts available"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OpenAI"}),": Per-image pricing, varies by model and resolution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Google Gemini"}),": Per-image pricing, free tier available"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Monitor usage through provider dashboards. The MCP server doesn't add usage tracking\u2014implement that in your application layer if needed."}),"\n",(0,s.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"The server returns provider errors to the client. Common failures:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Authentication errors"}),": Invalid or expired credentials"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rate limits"}),": Too many requests in short time window"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Model unavailable"}),": Requested model not accessible in your region/account"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Invalid parameters"}),": Unsupported image dimensions or formats"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Your AI assistant displays these errors in the chat. For programmatic use, parse the error response and implement retry logic."}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-this-pattern",children:"When to Use This Pattern"}),"\n",(0,s.jsx)(n.p,{children:"Universal Image MCP works well when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"You need flexibility to switch providers based on use case"}),"\n",(0,s.jsx)(n.li,{children:"You're building AI applications that generate images"}),"\n",(0,s.jsx)(n.li,{children:"You want to compare provider outputs without managing multiple integrations"}),"\n",(0,s.jsx)(n.li,{children:"You're using Claude Desktop or other MCP-compatible clients"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"It's less useful when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"You only need one provider (use their SDK directly)"}),"\n",(0,s.jsx)(n.li,{children:"You need fine-grained control over provider-specific features"}),"\n",(0,s.jsx)(n.li,{children:"You're building high-throughput batch processing (MCP adds overhead)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,s.jsx)(n.p,{children:"The MCP ecosystem is evolving rapidly. Future enhancements could include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Streaming support"})," for progressive image generation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Batch operations"})," for generating multiple images in one call"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cost estimation"})," before generating images"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Additional providers"})," (Stability AI, Midjourney API when available)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The code is open source at ",(0,s.jsx)(n.a,{href:"https://github.com/manu-mishra/universal-image-mcp",children:"github.com/manu-mishra/universal-image-mcp"}),". Contributions welcome."]}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"Multi-provider AI image generation doesn't require managing three separate integrations. By building an MCP server that abstracts provider differences, you get a single interface that works across AWS Bedrock, OpenAI, and Google Gemini."}),"\n",(0,s.jsx)(n.p,{children:"The Model Context Protocol provides the standardization layer. Your application\u2014whether it's Claude Desktop, a custom MCP client, or an AI agent\u2014interacts with one set of tools. The server handles routing, authentication, and API translation."}),"\n",(0,s.jsx)(n.p,{children:"If you're building AI applications that need image generation flexibility, this pattern is worth considering. One server, three providers, zero integration headaches."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resources:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/manu-mishra/universal-image-mcp",children:"Universal Image MCP on GitHub"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://pypi.org/project/universal-image-mcp/",children:"Universal Image MCP on PyPI"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://modelcontextprotocol.io",children:"Model Context Protocol Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/models-supported.html",children:"AWS Bedrock Image Models"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://platform.openai.com/docs/guides/images",children:"OpenAI Image Generation API"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ai.google.dev/gemini-api/docs",children:"Google Gemini API Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);